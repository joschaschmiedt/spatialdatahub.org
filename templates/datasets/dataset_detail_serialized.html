{% extends "base_portal.html" %}
{% load staticfiles %}

{% block title %}{{ dataset.title }}{% endblock title %}

{% block css %}

<style>

  #datasetsContainer {
  height: 50em;
  float: left;
  }

  #datasets-list {
  overflow-y: auto;
  height: 41em;
  }

  #mapContainer {
  float: right;
  }

  #mapid {
  height: 50em;
  margin-bottom: 10px;
  }

  #find_place_container {
  display: none;
  }

  #test_url_container {
  display: none;
  }

  /*
  #draw_polygon_container {
  display: none;
  }
  */

  #within_polygon_container {
  display: none;
  }

</style>

{% endblock css %}

{% block breadcrumbs %}
/ <a href="{{ account.get_absolute_url }}">{{ account.user }}</a>
/ <a href="{{ dataset.get_absolute_url }}">{{ dataset.title }}</a>
{% endblock breadcrumbs %}

{% block portal_content %}

<h1>{{ title }} page</h1>
<hr/>
<h1>
  {% if request.user == account.user %}
  {{ request.user }}
  {% endif %}
</h1>

<div class="row" id="main">
  <div class="col-xs-12">
    <p><b>Author:</b> {{ author }}</p>
    <p><b>Description:</b> {{ description }}</p>

    {% if request.user == account.user %}
    <h4>
      <a href="{% url 'datasets:dataset_update' account.account_slug dataset.dataset_slug dataset.pk %}">
        Update Dataset Details
      </a>
      <h4>
        <a href="{% url 'datasets:dataset_update_auth' account.account_slug dataset.dataset_slug dataset.pk %}">
          Update Dataset Auth Details
        </a>
        <h4>
          <a href="{% url 'datasets:dataset_remove' account.account_slug dataset.dataset_slug dataset.pk %}">
            Remove Dataset
          </a>
        </h4>
        {% endif %}


        <hr/>
  </div>
  <div>
    <h3>account slug: {{account_slug}}</h3>
    <h3>dataset slug: {{dataset_slug}}</h3>
  </div>


  <!-- this should be javascript from here -->
  <div class="col-xs-12" id="map-and-buttons">
    <div id="js-mount">
      <i class="fa fa-lg fa-spinner fa-spin"></i><br><br>
      <i class="pending">Loading...</i><br><br>  
    </div>
  </div>
  <!-- to here -->

  <script>
    window.json_data = JSON.parse("{{json_data|escapejs}}");
    window.js_mount = document.getElementById("js-mount");
    console.log(window.json_data)
  </script>
  <script"{% static 'js/serialized.js' %}"></script>

  {% endblock portal_content %}

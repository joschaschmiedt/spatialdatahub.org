{% extends 'base.html' %}
{% load staticfiles %}

{% block title %}Portal{% endblock title %}

{% block css %}
<style>

  #mapid {
    height: 45em;
    margin-bottom: 10px;
  }

</style>
<link rel='stylesheet' href='{% static "css/dashboard.css" %}'/>
<link rel='stylesheet' href='https://unpkg.com/leaflet@1.0.3/dist/leaflet.css' />

<!-- Marker Cluster CSS -->
<link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.0.0/dist/MarkerCluster.css" />
<link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.0.0/dist/MarkerCluster.Default.css" />

<!-- End Marker Cluster CSS -->

{% endblock css %}

{% block content %}

<div class='container-fluid'>
  <div class='row'>
    <nav class='col-sm-3 hidden-xs-down bg-faded sidebar'>
    <!-- I want to put the search box here -->
<!--      <ul class='nav nav-pills flex-column'>
        <li class='nav-item'>
          <a class='nav-link active' href='#'>Overview</a>
        </li>
      </ul> -->
      <ul class='nav nav-pills flex-column'>
      {% if dataset_list %}
        {% for dataset in dataset_list %}
        <li class='nav-item'>
          <a class='nav-link' name='dataset' id={{ dataset.ext }} value={{ dataset.pk }}
            href='#'>
            {{ dataset.title }}
          </a>
        </li>
        {% endfor %}
      {% else %}
        <li class='nav-item'>
          There are no datasets available
        </li>
      {% endif %}
      </ul>

    </nav>

    <main class="col-sm-9 offset-sm-3 pt-3">
      <!-- MAP -->
      <div id='mapid'></div>
      <!-- END MAP -->
    </main>
  </div>
</div>

{% endblock content %}

{% block js %}

<script src='https://unpkg.com/leaflet@1.0.3/dist/leaflet.js'></script>
<script src='//api.tiles.mapbox.com/mapbox.js/plugins/leaflet-omnivore/v0.3.1/leaflet-omnivore.min.js'></script>
<script src='https://unpkg.com/leaflet.markercluster@1.0.0/dist/leaflet.markercluster.js'></script>

<script src='{% static "js/index.js" %}'></script>
<script src='{% static "js/portalView.js" %}'></script>
{% endblock js %}

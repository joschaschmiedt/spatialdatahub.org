{% extends 'base.html' %}
{% load staticfiles %}

{% block title %}Portal{% endblock title %}

{% block css %}
<style>

  #mapid {
    height: 45em;
    margin-bottom: 10px;
  }

</style>
<link rel='stylesheet' href='{% static "css/dashboard.css" %}'/>
<link rel='stylesheet' href='https://unpkg.com/leaflet@1.0.3/dist/leaflet.css' />

<!-- Marker Cluster CSS -->
<!--
<link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.0.0/dist/MarkerCluster.css" />
<link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.0.0/dist/MarkerCluster.Default.css" />
-->
<!-- End Marker Cluster CSS -->

{% endblock css %}

{% block content %}

<!-- account / dataset links -->
<!-- I will append the link to the dataset here -->
<div class='container'>
  <div class='row' id='breadcrumbs'>
    <h4 class='col-xs-12'>
      <a href='{% url "portal" %}' >*</a>
      <span id='account-dataset-breadcrumbs'></span>
    </h4>
  </div>
  <hr class="divider">
</div>
<!-- end account / dataset links -->

<h1>Should I check if the datasets have auth stuff in the template?</h1>
<div class='container-fluid'>
  <div class='row'>
    <div class='col-sm-3 sidebar'>
      <ul class='nav nav-sidebar'>
        {% if dataset_list %}
          {% for dataset in dataset_list %}
          <li class=''>
            <!-- 
              had to make some hacky code here... not to nice,
              but it will allow me to append the link to
              the breadcrumbs thing above 
            -->
            <a name='dataset' id={{ dataset.ext }} value={{ dataset.pk }} href='#'
               url='{{ dataset.get_absolute_url}}'>
              {{ dataset.title }}
            </a>
          </li>
          {% endfor %}
        {% else %}
          <li><a href='#'>There are no datasets available</a></li>
        {% endif %}
      </ul>
    </div>

    <div class='col-sm-9 col-sm-offset-3 main'>
      <div id='mapid'></div>
    </div>

  </div>
</div>

<!--
<div class='container'>
  <div class='row' id='main-content'>
    <nav class='col-sm-3 hidden-xs-down bg-faded sidebar'>
      <ul class='nav nav-pills flex-column'>
      {% if dataset_list %}
        {% for dataset in dataset_list %}
        <li class='nav-item'>
          <a class='nav-link' name='dataset' id={{ dataset.ext }} value={{ dataset.pk }}
            href='#'>
            {{ dataset.title }}
          </a>
        </li>
        {% endfor %}
      {% else %}
        <li class='nav-item'>
          There are no datasets available
        </li>
      {% endif %}
      </ul>
    </nav>
    <main class="col-sm-9 offset-sm-3 pt-3">
      <div id='mapid'></div>
    </main>
  </div>
</div>
-->


{% endblock content %}

{% block js %}

<script src='https://unpkg.com/leaflet@1.0.3/dist/leaflet.js'></script>
<script src='//api.tiles.mapbox.com/mapbox.js/plugins/leaflet-omnivore/v0.3.1/leaflet-omnivore.min.js'></script>
<!--
<script src='https://unpkg.com/leaflet.markercluster@1.0.0/dist/leaflet.markercluster.js'></script>
-->

<script src='{% static "js/index.js" %}'></script>
<script src='{% static "js/index_maps.js" %}'></script>
<script src='{% static "js/portalView.js" %}'></script>
{% endblock js %}

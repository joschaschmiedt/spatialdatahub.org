{% extends 'base.html' %}
{% load staticfiles %}

{% block title %}Portal{% endblock title %}

{% block css %}
<style>

  #datasetsContainer {
    overflow-y: auto;
    float: left;
  }

  .breadcrumb {
    background-color: white;
  }

  #mapContainer {
    float: right;
  }

  #mapid {
    height: 40em;
    margin-bottom: 10px;
  }

</style>
<link rel='stylesheet' href='{% static "css/dashboard.css" %}'/>
<link rel='stylesheet' href='https://unpkg.com/leaflet@1.0.3/dist/leaflet.css' />

<!-- Marker Cluster CSS -->
<!--
<link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.0.0/dist/MarkerCluster.css" />
<link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.0.0/dist/MarkerCluster.Default.css" />
-->
<!-- End Marker Cluster CSS -->

{% endblock css %}

{% block content %}

<div class="container">
  <!--
  <div class="row" id="breadcrumbs">
    <div class='col-xs-12'>
      <h4>
        <a href='{% url "portal" %}' >*</a>
        <span id='account-dataset-breadcrumbs'></span>
      </h4>
      <hr>
    </div>
  </div>
  -->

  <ol class='breadcrumb'>
    <li><a href='{% url "portal" %}' >*</a></li>
    <li id='breadcrumbContainer'></li>
  </ol>

<h1>Should I check if the datasets have auth stuff in the template?</h1>
  <div class="row" id="filters">
  </div>

  <div class="row" id="main">
    <div class="col-xs-12 col-md-8 col-lg-9" id="mapContainer">
      <div id='mapid'></div>
    </div>

    <div class="col-xs-12 col-md-4 col-lg-3" id="datasetsContainer">
      <ol class='nav nav-pills nav-stacked'>

        {% if dataset_list %}
          {% for dataset in dataset_list %}
            <li class=''>
              <a name='dataset' id={{ dataset.ext }} value={{ dataset.pk }} href='#'
                 url='{{ dataset.get_absolute_url }}'>
                {{ dataset.title }}
              </a>
            </li>
          {% endfor %}
        {% else %}
          <li><a href='#'>There are no datasets available</a></li>
        {% endif %}
      </ol>
    </div>
  </div>

</div>

{% endblock content %}

{% block js %}

<script src='https://unpkg.com/leaflet@1.0.3/dist/leaflet.js'></script>
<script src='//api.tiles.mapbox.com/mapbox.js/plugins/leaflet-omnivore/v0.3.1/leaflet-omnivore.min.js'></script>
<!--
<script src='https://unpkg.com/leaflet.markercluster@1.0.0/dist/leaflet.markercluster.js'></script>
-->

<script src='{% static "js/index.js" %}'></script>
<script src='{% static "js/index_maps.js" %}'></script>
<script src='{% static "js/portalView.js" %}'></script>
{% endblock js %}

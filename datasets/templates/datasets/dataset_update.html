{% extends 'base.html' %}
{% load staticfiles %}
{% load crispy_forms_tags %}

{% block head_title %}
  Update {{ dataset.title }}
{% endblock head_title %}
{% block content %}

<!--
    Do I even need a map on this page at all? Should I just have a full
    width form to create a dataset? That will be a problem for later,
    I have a test for it now.
-->
  <div class="col-12 col-xs-12">  
    <h1>{{ dataset.title }} Update Form</h1>
  </div>

<!-- The Form -->
  <div class="col-12 col-xs-12" id="update_dataset_form">  
    <form action="." method="post">
      {% csrf_token %}
      {{ form|crispy }}
      <input id="submit_dataset" class="btn btn-default" type="submit" value="Submit">
    </form>
  </div>
<!-- End The Form -->

<!-- Map and Background Choices -->
<div class="col-12 col-xs-12" role="main" id="main_map">
  <div id="mapid">
  </div>
</div>
<!-- End Map and Background Choices -->
<div>
  <p>{{ data }}</p>
</div>


{% endblock content %}
{% block js %}

<script type="text/javascript" src="{% static 'js/datasets/portal_map.js' %}" ></script>

<!-- Autoload Dataset to Map -->

<script type="text/javascript">

$(document).ready(function(){
	$.ajax({url:"/ajax/load_dataset/" + {{ dataset.pk }}, success: function(data){
		getJsonFromLocal($.parseJSON(data));
	}});
});

</script>

{% endblock js%}

{% extends 'base.html' %}
{% load staticfiles %}
{% load crispy_forms_tags %}

{% block content %}

<!--
    Do I even need a map on this page at all? Should I just have a full
    width form to create a dataset? That will be a problem for later,
    I have a test for it now.
-->

<!-- The Form -->
  <div class="col-12 col-xs-12" id="update_dataset_form">  
    <form action="." method="post">
      {% csrf_token %}
      {{ form|crispy }}
      <input id="submit_dataset" class="btn btn-default" type="submit" value="Submit">
    </form>
  </div>
<!-- End The Form -->

<!-- Map and Background Choices -->
<div class="col-12 col-xs-12" role="main" id="main_map">
  <div id="mapid">
  </div>
</div>
<!-- End Map and Background Choices -->


<script type="text/javascript" src="{% static 'datasets/js/portal_map.js' %}" ></script>

<!-- Autoload Dataset to Map -->
<!-- I should write this as a jQuery function. That way it can be put on all the dataset specific pages -->
{% if dataset.fields.json %}
  <script type="text/javascript">
    getJsonFromLocal('{{ dataset.fields.json }}');
  </script>
{% else %}
  <script type="text/javascript">
    getJsonFromUrl('{{ dataset.fields.url }}');
  </script>
{% endif %}
<!-- End Autoload Dataset to Map -->

{% endblock content %}
